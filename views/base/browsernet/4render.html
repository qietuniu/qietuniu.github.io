<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>浏览器基础 | 切图妞</title>
    <meta name="generator" content="VuePress 1.5.0">
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content="既然有人要赢，为什么不能是我">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    <meta name="keywords" content="切图妞,旅陈,技术教程,博客,个人博客,js,html,css,vue,react,node,vuepress,nuxt">
    <meta name="baidu-site-verification" content="wzfo24ihkB">
    <link rel="preload" href="/assets/css/0.styles.9ac3d440.css" as="style"><link rel="preload" href="/assets/js/app.da1d409d.js" as="script"><link rel="preload" href="/assets/js/3.d3ecd2b0.js" as="script"><link rel="preload" href="/assets/js/1.9151198b.js" as="script"><link rel="preload" href="/assets/js/40.b81e0a49.js" as="script"><link rel="prefetch" href="/assets/js/10.fe2f8737.js"><link rel="prefetch" href="/assets/js/11.c68ec705.js"><link rel="prefetch" href="/assets/js/12.2721230f.js"><link rel="prefetch" href="/assets/js/13.df969179.js"><link rel="prefetch" href="/assets/js/14.2cd62239.js"><link rel="prefetch" href="/assets/js/15.d4530665.js"><link rel="prefetch" href="/assets/js/16.514b3bee.js"><link rel="prefetch" href="/assets/js/17.4524d231.js"><link rel="prefetch" href="/assets/js/18.21e9d502.js"><link rel="prefetch" href="/assets/js/19.2c613a8c.js"><link rel="prefetch" href="/assets/js/20.612af0c9.js"><link rel="prefetch" href="/assets/js/21.17e86ffe.js"><link rel="prefetch" href="/assets/js/22.4b4cebae.js"><link rel="prefetch" href="/assets/js/23.4a987c85.js"><link rel="prefetch" href="/assets/js/24.1f5029a8.js"><link rel="prefetch" href="/assets/js/25.d177209d.js"><link rel="prefetch" href="/assets/js/26.7f687efb.js"><link rel="prefetch" href="/assets/js/27.2b24c40c.js"><link rel="prefetch" href="/assets/js/28.1b3c78c5.js"><link rel="prefetch" href="/assets/js/29.1b372f75.js"><link rel="prefetch" href="/assets/js/30.70137bce.js"><link rel="prefetch" href="/assets/js/31.79a4bb7e.js"><link rel="prefetch" href="/assets/js/32.5e9b2830.js"><link rel="prefetch" href="/assets/js/33.2de5a638.js"><link rel="prefetch" href="/assets/js/34.3c319d8e.js"><link rel="prefetch" href="/assets/js/35.f94dbc98.js"><link rel="prefetch" href="/assets/js/36.869be746.js"><link rel="prefetch" href="/assets/js/37.f5cc8a33.js"><link rel="prefetch" href="/assets/js/38.9c9a192e.js"><link rel="prefetch" href="/assets/js/39.9c07e19d.js"><link rel="prefetch" href="/assets/js/4.f2b57a55.js"><link rel="prefetch" href="/assets/js/41.c4b5b337.js"><link rel="prefetch" href="/assets/js/42.c8fceaad.js"><link rel="prefetch" href="/assets/js/43.a52ac8c7.js"><link rel="prefetch" href="/assets/js/44.da94c285.js"><link rel="prefetch" href="/assets/js/45.80fe3cb9.js"><link rel="prefetch" href="/assets/js/46.1f010327.js"><link rel="prefetch" href="/assets/js/47.e6b247e5.js"><link rel="prefetch" href="/assets/js/48.80656313.js"><link rel="prefetch" href="/assets/js/49.fcc518a4.js"><link rel="prefetch" href="/assets/js/5.8ce4ec40.js"><link rel="prefetch" href="/assets/js/50.ec9e7593.js"><link rel="prefetch" href="/assets/js/51.70d0a700.js"><link rel="prefetch" href="/assets/js/52.c6594b41.js"><link rel="prefetch" href="/assets/js/53.cda90f93.js"><link rel="prefetch" href="/assets/js/54.13026aae.js"><link rel="prefetch" href="/assets/js/55.5e36b956.js"><link rel="prefetch" href="/assets/js/56.8b5573a5.js"><link rel="prefetch" href="/assets/js/57.bbfd98a2.js"><link rel="prefetch" href="/assets/js/58.2246b83a.js"><link rel="prefetch" href="/assets/js/59.46250fbb.js"><link rel="prefetch" href="/assets/js/6.e6c2a132.js"><link rel="prefetch" href="/assets/js/60.99aa63c3.js"><link rel="prefetch" href="/assets/js/61.59591759.js"><link rel="prefetch" href="/assets/js/62.1e9ec84e.js"><link rel="prefetch" href="/assets/js/7.f01e1684.js"><link rel="prefetch" href="/assets/js/8.886ce487.js"><link rel="prefetch" href="/assets/js/9.0096b68f.js">
    <link rel="stylesheet" href="/assets/css/0.styles.9ac3d440.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-73b6f1b4><div data-v-73b6f1b4><div id="loader-wrapper" class="loading-wrapper" data-v-71fac282 data-v-73b6f1b4 data-v-73b6f1b4><div class="loader-main" data-v-71fac282><div data-v-71fac282></div><div data-v-71fac282></div><div data-v-71fac282></div><div data-v-71fac282></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-58d5ab76 data-v-73b6f1b4 data-v-73b6f1b4><h3 class="title" style="display:none;" data-v-58d5ab76 data-v-58d5ab76>切图妞</h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-58d5ab76 data-v-58d5ab76><input type="password" value="" data-v-58d5ab76> <span data-v-58d5ab76>Konck! Knock!</span> <button data-v-58d5ab76>OK</button></label> <div class="footer" style="display:none;" data-v-58d5ab76 data-v-58d5ab76><span data-v-58d5ab76><i class="iconfont reco-theme" data-v-58d5ab76></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-58d5ab76>vuePress-theme-reco</a></span> <span data-v-58d5ab76><i class="iconfont reco-copyright" data-v-58d5ab76></i> <a data-v-58d5ab76><span data-v-58d5ab76>切图妞</span>
            
          <span data-v-58d5ab76>2020 - </span>
          2021
        </a></span></div></div> <div class="hide" data-v-73b6f1b4><header class="navbar" data-v-73b6f1b4><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.png" alt="切图妞" class="logo"> <span class="site-name">切图妞</span></a> <div class="links"><!----> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-document"></i>
      前端知识梳理
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/views/base/vue/1basis.html" class="nav-link"><i class="iconfont undefined"></i>
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/views/base/browsernet/1dns.html" class="nav-link"><i class="iconfont undefined"></i>
  浏览器 &amp; 网络
</a></li><li class="dropdown-item"><!----> <a href="/views/base/css/css1.html" class="nav-link"><i class="iconfont undefined"></i>
  HTML &amp; CSS
</a></li><li class="dropdown-item"><!----> <a href="/views/base/safe/safe.html" class="nav-link"><i class="iconfont undefined"></i>
  Web安全
</a></li><li class="dropdown-item"><!----> <a href="/views/base/algorithm/1sort.html" class="nav-link"><i class="iconfont undefined"></i>
  算法
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      文章分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/前端小麻烦/" class="nav-link"><i class="iconfont undefined"></i>
  前端小麻烦
</a></li><li class="dropdown-item"><!----> <a href="/categories/配置乐园/" class="nav-link"><i class="iconfont undefined"></i>
  配置乐园
</a></li><li class="dropdown-item"><!----> <a href="/categories/实战不完全手册/" class="nav-link"><i class="iconfont undefined"></i>
  实战不完全手册
</a></li><li class="dropdown-item"><!----> <a href="/categories/手撕源码/" class="nav-link"><i class="iconfont undefined"></i>
  手撕源码
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-account"></i>
      宝藏女孩
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/views/other/tpl.html" class="nav-link"><i class="iconfont reco-other"></i>
  模板仓
</a></li><li class="dropdown-item"><!----> <a href="/views/other/project.html" class="nav-link"><i class="iconfont reco-eye"></i>
  项目简介
</a></li><li class="dropdown-item"><!----> <a href="https://github.com/qietuniu" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://segmentfault.com/u/qietuniu" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-sf"></i>
  Segmentfault
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://blog.csdn.net/u011684839" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-csdn"></i>
  CSDN
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时间轴
</a></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-73b6f1b4></div> <aside class="sidebar" data-v-73b6f1b4><div class="personal-info-wrapper" data-v-3eba7259 data-v-73b6f1b4><img src="/avatar.png" alt="author-avatar" class="personal-img" data-v-3eba7259> <h3 class="name" data-v-3eba7259>
    切图妞
  </h3> <div class="num" data-v-3eba7259><div data-v-3eba7259><h3 data-v-3eba7259>19</h3> <h6 data-v-3eba7259>Article</h6></div> <div data-v-3eba7259><h3 data-v-3eba7259>18</h3> <h6 data-v-3eba7259>Tag</h6></div></div> <hr data-v-3eba7259></div> <nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-document"></i>
      前端知识梳理
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/views/base/vue/1basis.html" class="nav-link"><i class="iconfont undefined"></i>
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/views/base/browsernet/1dns.html" class="nav-link"><i class="iconfont undefined"></i>
  浏览器 &amp; 网络
</a></li><li class="dropdown-item"><!----> <a href="/views/base/css/css1.html" class="nav-link"><i class="iconfont undefined"></i>
  HTML &amp; CSS
</a></li><li class="dropdown-item"><!----> <a href="/views/base/safe/safe.html" class="nav-link"><i class="iconfont undefined"></i>
  Web安全
</a></li><li class="dropdown-item"><!----> <a href="/views/base/algorithm/1sort.html" class="nav-link"><i class="iconfont undefined"></i>
  算法
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      文章分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/前端小麻烦/" class="nav-link"><i class="iconfont undefined"></i>
  前端小麻烦
</a></li><li class="dropdown-item"><!----> <a href="/categories/配置乐园/" class="nav-link"><i class="iconfont undefined"></i>
  配置乐园
</a></li><li class="dropdown-item"><!----> <a href="/categories/实战不完全手册/" class="nav-link"><i class="iconfont undefined"></i>
  实战不完全手册
</a></li><li class="dropdown-item"><!----> <a href="/categories/手撕源码/" class="nav-link"><i class="iconfont undefined"></i>
  手撕源码
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-account"></i>
      宝藏女孩
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/views/other/tpl.html" class="nav-link"><i class="iconfont reco-other"></i>
  模板仓
</a></li><li class="dropdown-item"><!----> <a href="/views/other/project.html" class="nav-link"><i class="iconfont reco-eye"></i>
  项目简介
</a></li><li class="dropdown-item"><!----> <a href="https://github.com/qietuniu" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://segmentfault.com/u/qietuniu" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-sf"></i>
  Segmentfault
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://blog.csdn.net/u011684839" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-csdn"></i>
  CSDN
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时间轴
</a></div> <!----></nav> <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>浏览器 &amp; 网络</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/views/base/browsernet/1dns.html" class="sidebar-link">DNS域名解析</a></li><li><a href="/views/base/browsernet/2tcpudp.html" class="sidebar-link">TCP &amp; UDP</a></li><li><a href="/views/base/browsernet/3http.html" class="sidebar-link">HTTP</a></li><li><a href="/views/base/browsernet/4render.html" aria-current="page" class="active sidebar-link">浏览器基础</a></li><li><a href="/views/base/browsernet/summary.html" class="sidebar-link">浏览器&amp;网络综合题目</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>HTML &amp; CSS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JS基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>算法(整理中)</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Web安全</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-58d5ab76 data-v-73b6f1b4><h3 class="title" style="display:none;" data-v-58d5ab76 data-v-58d5ab76>浏览器基础</h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-58d5ab76 data-v-58d5ab76><input type="password" value="" data-v-58d5ab76> <span data-v-58d5ab76>Konck! Knock!</span> <button data-v-58d5ab76>OK</button></label> <div class="footer" style="display:none;" data-v-58d5ab76 data-v-58d5ab76><span data-v-58d5ab76><i class="iconfont reco-theme" data-v-58d5ab76></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-58d5ab76>vuePress-theme-reco</a></span> <span data-v-58d5ab76><i class="iconfont reco-copyright" data-v-58d5ab76></i> <a data-v-58d5ab76><span data-v-58d5ab76>切图妞</span>
            
          <span data-v-58d5ab76>2020 - </span>
          2021
        </a></span></div></div> <div data-v-73b6f1b4><main class="page"><div class="page-title" style="display:none;"><h1>浏览器基础</h1> <div data-v-42458482><i class="iconfont reco-account" data-v-42458482><span data-v-42458482>切图妞</span></i> <i class="iconfont reco-date" data-v-42458482><span data-v-42458482>2019-11-15</span></i> <i class="iconfont reco-eye" data-v-42458482><span id="/views/base/browsernet/4render.html" data-flag-title="Your Article Title" class="leancloud-visitors" data-v-42458482><a class="leancloud-visitors-count" style="font-size:.9rem;font-weight:normal;color:#999;"></a></span></i> <i class="iconfont reco-tag tags" data-v-42458482><span class="tag-item" data-v-42458482>浏览器</span></i></div></div> <div class="theme-reco-content content__default" style="display:none;"><h1 id="浏览器基础"><a href="#浏览器基础" class="header-anchor">#</a> 浏览器基础</h1> <h2 id="体系结构"><a href="#体系结构" class="header-anchor">#</a> 体系结构</h2> <p>![协议](/img/browser/协议. png)</p> <p>![五层网络结构](/img/browser/五层网络结构. png)</p> <p>![OSI七层模型](/img/browser/OSI七层模型. png)</p> <h2 id="页面加载过程"><a href="#页面加载过程" class="header-anchor">#</a> 页面加载过程</h2> <p>![页面加载过程](/img/browser/页面加载过程. png)</p> <p>1. 在浏览器中输入url
2. DNS解析域名</p> <blockquote><p>获取域名对应到IP地址</p></blockquote> <p>3. TCP传输报文（三次握手）</p> <p>建立连接</p> <p>4. 客户端发送 HTTP 请求</p> <blockquote><p>如果是 HTTPS 还需要建立SSL。如果是 HTTP2 则会先判断是否支持 HTTP2，否则降级到 HTTP1. x</p></blockquote> <p>5. IP协议查询MAC地址</p> <blockquote><p>IP协议把TCP分割好的各种数据包传送给接收方；ARP协议可以将IP地址解析成对应的MAC地址</p></blockquote> <p>6. 数据到达数据链路层</p> <blockquote><p>客户端发送请求的阶段结束</p></blockquote> <p>7. 服务器接收数据</p> <blockquote><p>接收端的服务器在链路层接收到数据包，再层层向上直到应用层将分段的数据包重新组成原来的HTTP请求报文</p></blockquote> <p>8. 服务器响应请求并返回结果</p> <blockquote><p>把不同请求结合配置文件委托给服务器上处理相应请求的程序进行处理，然后返回后台程序处理产生的结果作为响应</p></blockquote> <p>9. 浏览器渲染页面</p> <ol><li>TCP四次挥手</li></ol> <blockquote><p>断开连接</p></blockquote> <ol start="11"><li>浏览器发生异步请求</li></ol> <h2 id="渲染页面过程"><a href="#渲染页面过程" class="header-anchor">#</a> 渲染页面过程</h2> <p>![页面渲染]([/img/browser/页面渲染. png])</p> <p>1. 根据 HTML 解析 DOM 树</p> <div class="language- extra-class"><pre><code>字节 -&gt; 字符串 -&gt; 解析Token -&gt; 编译Node -&gt; DOM
</code></pre></div><blockquote><p>DOM 树解析的过程是一个深度优先遍历。即先构建当前节点的所有子节点，再构建下一个兄弟节点</p> <p>若遇到 script 标签，则 DOM 树的构建会暂停，直至脚本执行完毕</p></blockquote> <p>2. 根据 CSS 解析生成 CSS 规则树</p> <p>字节 -&gt; 字符串 -&gt; 解析Token -&gt; 编译Node -&gt; CSSOM</p> <blockquote><p>浏览器在 CSS 规则树生成之前不会进行渲染</p></blockquote> <p>3. 结合 DOM 树和 CSS 规则树，生成渲染树</p> <blockquote><p>渲染树和DOM树到区别在于：过滤掉Head和display:none这样的节点</p></blockquote> <p>4. 据渲染树计算每一个节点的信息</p> <ul><li>布局：通过渲染树中渲染对象的信息，计算出每一个渲染对象的位置和尺寸</li> <li>回流：在布局完成后，发现了某个部分发生了变化影响了布局，那就需要倒回去重新渲染</li></ul> <p>5. 根据计算好的信息绘制页面</p> <ul><li>重绘：某个元素的背景颜色，文字颜色等，不影响元素周围或内部布局的属性，将只会引起浏览器的重绘。</li> <li>回流：某个元素的尺寸发生了变化，则需重新计算渲染树，重新渲染。</li></ul> <blockquote><p>绘制阶段，系统会遍历呈现树，并调用呈现器的“paint”方法，将呈现器的内容显示在屏幕上</p></blockquote> <p>6. 浏览器会将各层的信息发送给GPU，GPU会将各层合成（composite），显示在屏幕</p> <h3 id="css为什么从右往左解析"><a href="#css为什么从右往左解析" class="header-anchor">#</a> CSS为什么从右往左解析</h3> <p>为了避免对所有元素进行遍历，总的来说从右往左进行解析还是会比从左往右解析要少很多次的匹配. 从右往左进行匹配的时候，匹配的全部是DOM元素的父节点，而从左往右进行匹配的时候时候，匹配的全部是DOM元素的子节点，这样就避免了HTML与CSS没有下载完需要进行等待的情形。</p> <h3 id="内联base64图片和-img标签加载图片的优缺点？适用场景？"><a href="#内联base64图片和-img标签加载图片的优缺点？适用场景？" class="header-anchor">#</a> 内联base64图片和/img标签加载图片的优缺点？适用场景？</h3> <p>内联base64优点：</p> <ul><li>减少http请求次数</li> <li>做为背景平铺类的图片使用内联图片的时候不会影响加载速度。</li></ul> <p>内联base64缺点：</p> <ul><li>浏览器不会缓存内联图片资源</li> <li>兼容性较差，只支持ie8以上浏览器</li> <li>超过1000kb的图片，base64编码会使图片大小增大，导致网页整体下载速度减慢</li></ul> <p>小于等于1000kb大小且没有兼容性限制，不需要缓存图片资源的情况下选择内联base64图片。其余选择/img标签</p> <h3 id="浏览器加载css文件的过程？"><a href="#浏览器加载css文件的过程？" class="header-anchor">#</a> 浏览器加载CSS文件的过程？</h3> <p>文件加载过程整体按照html文档的顺序加载。</p> <p>特点：</p> <ul><li>css文件是并行下载的。</li> <li>如果CSS文件在head中，CSS文件不会阻塞DOM树的解析，但是会阻塞DOM树的渲染。</li> <li>如果CSS文件在body中，CSS文件不仅会阻塞DOM树的解析，还会阻塞DOM树的渲染，css文件也会阻塞后面js文件加载。</li> <li>css的下载不会阻塞后面js的下载，但是js下载完成后，被阻塞执行</li> <li>如果 js 去请求 css 的信息，这个时候 css 还没加载完毕，就会导致取到的信息错误。为了防止这一点，css 会阻塞 js 的解析。谷歌做了优化，只有脚本去访问的样式会受到尚未加载解析的 css 影响时，才会禁止此脚本</li></ul> <blockquote><p>我们可以通过 media query 来进行优化。比如：这样如果小于 750px ，则不会加载该 css</p></blockquote> <p></p> <blockquote></blockquote> <div class="language-html line-numbers-mode"><pre class="language-html"><code>&gt;
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>”something.css”</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>”stylesheet”</span> <span class="token attr-name">media</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>”(min-width:</span> <span class="token attr-name">750px)”</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p></p> <h3 id="浏览器加载js文件的过程？"><a href="#浏览器加载js文件的过程？" class="header-anchor">#</a> 浏览器加载JS文件的过程？</h3> <p>现代浏览器会并行加载js文件，但是按照书写顺序执行代码。加载或者执行js时会阻塞对标签的解析，也就是阻塞了dom树的形成，只有等到js执行完毕，浏览器才会继续解析标签。没有dom树，浏览器就无法渲染，所以当加载很大的js文件时，可以看到页面很长时间是一片空白。</p> <p>通常把script内容放在body最后，这样脚本文件不会阻止其他资源的下载。</p> <h3 id="浏览器加载图片-音频等文件的过程？"><a href="#浏览器加载图片-音频等文件的过程？" class="header-anchor">#</a> 浏览器加载图片/音频等文件的过程？</h3> <p>图片视频不会阻塞DOM树的渲染，执行后面的渲染的同时向服务器请求下载 。下载完毕后，由于图片视频占用了一定面积，影响了后面段落的排布，因此浏览器需要回过头来重新渲染这部分代码。</p> <h3 id="async-defer"><a href="#async-defer" class="header-anchor">#</a> async &amp; defer</h3> <h4 id="async"><a href="#async" class="header-anchor">#</a> async</h4> <p>下载完就执行： <code>&lt;script src=&quot;js/bar.js&quot; async&gt;&lt;/script&gt;</code></p> <p>该属性标注的脚本是异步脚本，即异步下载脚本时，不会阻塞文档解析，但是一旦下载完成后，立即执行，阻塞文档解析。</p> <ul><li>defer属性表示延迟脚本的执行，等到整个文档解析完再执行</li> <li>defer属性能延迟执行，但是不会延迟下载，浏览器遇到script就立即下载脚本</li> <li>文档解析完成时，脚本被执行，此时也会触发domcontentloaded事件，优先执行脚本</li> <li>多个标签添加defer属性，执行顺序仍然是按书写顺序</li></ul> <h4 id="defer"><a href="#defer" class="header-anchor">#</a> defer</h4> <p>渲染完再执行： <code>&lt;script src=&quot;js/bar.js&quot; defer&gt;&lt;/script&gt;</code></p> <p>该属性标注的脚本是延迟脚本，使得浏览器延迟脚本的执行，也就是说，脚本会被异步下载但是不会被执行，直到文档的载入和解析完成，并可以操作，脚本才会被执行</p> <ul><li>async属性的作用是让浏览器异步加载脚本文件。在加载脚本文件的时候，浏览器能继续标签的解析。</li> <li>异步脚本一定会在load事件之前执行，但可能会在domcontentloaded事件之前或者之后执行。</li> <li>异步脚本之间的执行顺序不确定，可能不会按照书写顺序执行</li></ul> <h4 id="相同点："><a href="#相同点：" class="header-anchor">#</a> 相同点：</h4> <ul><li>加载文件时不阻塞页面渲染。</li> <li>对于inline的script无效。</li> <li>使用这两个属性的脚本中不能调用document. write方法。</li> <li>有脚本的onload的事件回调。</li></ul> <h4 id="不同点："><a href="#不同点：" class="header-anchor">#</a> 不同点：</h4> <ul><li>用了async：不会阻碍文档的解析，但是一旦加载了就会立即执行，不能保证执行的顺序，因为async的脚本执行顺序是没有保证的，因此要确认脚本间没有依赖关系。 用了defer ：读到了，也不会立即执行，要等文档都读取完毕，再去执行。</li> <li>同时使用async和defer属性，后者不起作用，浏览器行为由async属性决定</li></ul> <h3 id="如何突破浏览器同时下载数量限制？"><a href="#如何突破浏览器同时下载数量限制？" class="header-anchor">#</a> 如何突破浏览器同时下载数量限制？</h3> <h3 id="重排与重绘"><a href="#重排与重绘" class="header-anchor">#</a> 重排与重绘</h3> <p>重排必导致重绘。</p> <h4 id="重排"><a href="#重排" class="header-anchor">#</a> 重排</h4> <p>重排又称回流或布局（Layout/Reflow），一般意味着元素的内容、结构、位置或尺寸发生了变化，需要重新计算样式和渲染树。</p> <p>产生因素：</p> <ul><li><p>页面渲染初始化</p></li> <li><p>DOM结构改变，比如新作或删除了某个节点</p></li> <li><p>render树变化，比如减少了padding ，border，fontSIze等</p></li> <li><p>激活CSS伪类（例如：:hover）</p></li> <li><p>窗口resize</p></li> <li><p>获取某些属性，引发回流。</p> <p>很多浏览器会对回流做优化，会等到数量足够时做一次批处理回流， 但是除了render树的直接变化，当获取一些属性时，浏览器为了获得正确的值也会触发回流，这样使得浏览器优化无效。</p> <ul><li>offset(Top/Left/Width/Height)</li> <li>scroll(Top/Left/Width/Height)</li> <li>cilent(Top/Left/Width/Height)</li> <li>width, height</li> <li>调用了 <code>getComputedStyle()</code> 或者IE的 <code>currentStyle</code></li> <li><code>scrollIntoView()</code> 、 <code>scrollIntoViewIfNeeded()</code></li> <li><code>getBoundingClientRect()</code></li> <li><code>scrollTo()</code></li></ul></li></ul> <h4 id="重绘"><a href="#重绘" class="header-anchor">#</a> 重绘</h4> <p>重绘（Repaint）表示元素发生的改变只是影响了元素的一些外观之类的时候（例如，背景色，边框颜色，文字颜色等），此时只需要应用新样式绘制这个元素就可以了。</p> <h4 id="优化"><a href="#优化" class="header-anchor">#</a> 优化</h4> <p>重排的成本开销要高于重绘，而且一个节点的重排往往回导致子节点以及同级节点的重排。重排必引起重绘，所以重排优化方案中一般都包括重绘，我们尽可能尽量避免重排。</p> <ul><li><p>减少逐项更改样式</p> <p>最好一次性更改style，或者将样式定义为class并一次性更新，尽可能在DOM树的最末端改变class。CSS 选择符从右往左匹配查找，避免 DOM 深度过深</p></li> <li><p>避免循环操作dom</p> <p>创建一个documentFragment或div，在它上面应用所有DOM操作，最后再把它添加到window. document</p></li> <li><p>避免多次读取offset等属性。</p> <p>无法避免则将它们缓存到变量</p></li> <li><p>将复杂的元素绝对定位或固定定位，</p> <p>假如使得它脱离文档流，否则回流代价会很高</p></li> <li><p>使用 translate 替代 top</p></li> <li><p>使用 visibility 替换 display: none</p> <p>使用效果一致的前提，visibility只会引起重绘，display会引发回流（改变了布局）</p></li> <li><p>尽量不使用 table 布局</p> <p>可能很小的一个小改动会造成整个 table 的重新布局</p></li> <li><p>动画实现的速度的选择，动画速度越快，回流次数越多</p> <p>也可以选择使用 requestAnimationFrame</p></li> <li><p>将频繁运行的动画变为图层，图层能够阻止该节点回流影响别的元素。</p> <p>比如对于 video 标签，浏览器会自动将该节点变为图层</p></li> <li><p>将动画效果应用到position属性为absolute或fixed的元素上</p></li></ul> <h2 id="强缓存与弱缓存"><a href="#强缓存与弱缓存" class="header-anchor">#</a> 强缓存与弱缓存</h2> <p>![缓存](/img/browser/缓存. png)</p> <ul><li><p>浏览器缓存分为强缓存与弱缓存。</p></li> <li><p>浏览器在请求某一资源时先获取该资源缓存的header信息，判断是否命中强缓存（cache-control和expires信息），若命中直接从缓存中获取资源信息（包括缓存header信息），本次请求不与服务器进行通信。</p></li> <li><p>如果没有命中强缓存，浏览器会发送请求到服务器，请求会携带第一次请求返回的有关缓存的header字段信息（Last-Modified/If-Modified-Since和Etag/If-None-Match），由服务器根据请求中的相关header信息来比对结果是否协商缓存命中；若命中，则服务器返回新的响应header信息更新缓存中的对应header信息，但是并不返回资源内容，它会告知浏览器可以直接从缓存获取；否则返回最新的资源内容。</p></li></ul> <h3 id="强缓存-本地缓存"><a href="#强缓存-本地缓存" class="header-anchor">#</a> 强缓存/本地缓存</h3> <p>浏览器如果判断本地缓存未过期，就直接使用，无需发起http请求
CSS&amp;JS&amp;图片。标志状态码：200</p> <h4 id="pragma-expires（http1-0）"><a href="#pragma-expires（http1-0）" class="header-anchor">#</a> Pragma/Expires（http1. 0）</h4> <p>Pragma有两个字段Pragma和Expires。</p> <ul><li>Pragma的值为no-cache时，表示禁用缓存</li> <li>Expires的值是一个GMT时间，表示该缓存的有效时间。</li></ul> <p>优先级：
<code>Pragma &gt; Cache-Control &gt; Expires</code></p> <blockquote><p>如果当成一件商品来说，max-age代表的是有效期，需要和生产日期一起计算；Expires则直接代表过期时间</p></blockquote> <h4 id="cache-control-max-age（http1-1）"><a href="#cache-control-max-age（http1-1）" class="header-anchor">#</a> Cache-Control/Max-Age（http1. 1）</h4> <p>根据 <code>max-age</code> 的相对时间来判断是否命中强缓存。 <code>max-age</code> 设置缓存存储的最大周期，超过这个时间缓存被认为过期(单位秒)</p> <p>其他属性</p> <ul><li><p>public： 服务器端和浏览器端都能缓存</p></li> <li><p>private: 只能浏览器端缓存</p></li> <li><p>no-cache: 强制浏览器在使用cache拷贝之前先提交一个http请求到源服务器进行确认。http请求没有减少，会减少一个响应体(文件内容), 这种选项类似弱缓存。</p></li> <li><p>only-if-cached: 表明客户端只接受已缓存的响应，并且不要向原始服务器检查是否有更新的拷贝。</p></li> <li><p>no-store: 不缓存</p></li> <li><p>must-revalidate: 缓存必须在使用之前验证旧资源的状态，并且不可使用过期资源。</p></li></ul> <blockquote><p>https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Cache-Control</p></blockquote> <h4 id="max-age相比expires"><a href="#max-age相比expires" class="header-anchor">#</a> Max-Age相比Expires</h4> <ul><li>Expires使用的是服务器端的时间，当客户端时间和服务端不同步那这样，可能就会出问题了，造成了浏览器本地的缓存无用或者一直无法过期所以一般http1. 1后不推荐使用Expires</li> <li>Max-Age使用的是客户端本地时间的计算</li> <li>同时启用了Cache-Control与Expires，Cache-Control优先级高。</li></ul> <h4 id="如何清除"><a href="#如何清除" class="header-anchor">#</a> 如何清除</h4> <p>强缓存，在未过期时，更新页面中引用的资源路径，让浏览器主动放弃缓存，加载新资源。比如：文件命名带上hash值 <code>a?v=1</code></p> <h3 id="协商缓存-弱缓存"><a href="#协商缓存-弱缓存" class="header-anchor">#</a> 协商缓存/弱缓存</h3> <p>浏览器会向服务端发起http请求，文件未改变时，服务器告诉让浏览器使用本地缓存，否则重新加载。标志状态码：304。
If-None-Match/E-tag，If-Modified-Since/Last-Modified都是成对出现。</p> <h4 id="if-modified-since-last-modified（http1-0）"><a href="#if-modified-since-last-modified（http1-0）" class="header-anchor">#</a> If-Modified-Since/Last-Modified（http1. 0）</h4> <p>过程：</p> <p>1. 浏览器第一次发请求，服务器在返回的 respone 的 header 加上 Last-Modified，表示资源的最后修改时间
2. 再次请求资源，在 requset 的 header 加上 If-Modified-Since ，值就是上一次请求返回的 Last-Modified 值
3. 服务器根据请求传过来的值判断资源在该日期后资源是否有更新，没有则返回 304，有变化就正常返回资源内容，更新 Last-Modified 的值
4. 浏览器如果拿到304 从缓存加载资源，否则直接从服务器加载资源</p> <blockquote><p>服务器上次传来的Last-Modified与本次传过去的If-Modified-Since时一样的值。</p></blockquote> <p>如果在本地打开缓存文件，就会造成 Last-Modified 被修改，所以在 HTTP / 1. 1 出现了 ETag来解决该问题</p> <h4 id="if-none-match-e-tag（http1-1）"><a href="#if-none-match-e-tag（http1-1）" class="header-anchor">#</a> If-None-Match/E-tag（http1. 1）</h4> <p>两个的值是由服务器生成对每个资源对唯一标识字符串。</p> <p>![etag](/img/browser/etag. png)</p> <p>过程与 <code>If-Modified-Since/Last-Modified</code> 类似，与Last-Modified不一样的是，当服务器返回304 Not Modified的响应时，由于ETag重新生成过，response header中还会把这个ETag返回，即使这个ETag跟之前的没有变化。</p> <p>优先级：</p> <p><code>E-tag &gt; Last-Modified</code></p> <h4 id="为什么last-modified后还要新增etag"><a href="#为什么last-modified后还要新增etag" class="header-anchor">#</a> 为什么Last-Modified后还要新增Etag</h4> <ul><li><p>Last-Modified：表明服务端的文件最后何时改变。它有些缺陷存在：</p> <ul><li>只能精确到1s，当某些文件修改非常频繁，比如在秒以下的时间内进行修改时无法准确判断</li> <li>有些服务端的文件会周期性的改变，内容并不改变仅仅改变的修改时间，这个时候会导致缓存失效重新下载</li> <li>某些服务器不能精确的得到文件的最后修改时间</li></ul></li> <li><p>E-tag：是一种指纹机制，没有精确时间的限制，只要文件变E-tag就变。</p></li> <li><p>如果同时带有E-tag和Last-Modified，服务端会优先检查E-tag</p></li></ul> <h4 id="为什么协商缓存属性成对出现"><a href="#为什么协商缓存属性成对出现" class="header-anchor">#</a> 为什么协商缓存属性成对出现</h4> <p>协商缓存是浏览器判断资源是否可用，所以需要两个标识，第一个是第一次请求的响应头带上某个字段（Last-Modified或者Etag），第二个则是后续请求带上的对应请求字段（If-Modified-Since或者If-None-Match），两个标识一起出现才有意义，单独则没有什么效果。</p> <h4 id="如何清除-2"><a href="#如何清除-2" class="header-anchor">#</a> 如何清除</h4> <p>Ctrl + F5强制刷新可以使得缓存无效</p> <h3 id="区别"><a href="#区别" class="header-anchor">#</a> 区别</h3> <table><thead><tr><th>缓存类型</th> <th>状态码</th> <th>发送请求到服务器</th></tr></thead> <tbody><tr><td>强缓存</td> <td>200（from cache）</td> <td>否，直接从本地缓存取</td></tr> <tr><td>协商缓存</td> <td>304（not modified）</td> <td>是，通过服务器来告知缓存是否可用</td></tr></tbody></table> <table><thead><tr><th>用户操作</th> <th>强缓存</th> <th>协商缓存</th></tr></thead> <tbody><tr><td>地址栏回车</td> <td>有效</td> <td>有效</td></tr> <tr><td>页面链接跳转</td> <td>有效</td> <td>有效</td></tr> <tr><td>新开窗口</td> <td>有效</td> <td>有效</td></tr> <tr><td>前进后退</td> <td>有效</td> <td>有效</td></tr> <tr><td>F5刷新</td> <td>无效</td> <td>有效</td></tr> <tr><td>ctrl + F5</td> <td>无效</td> <td>无效</td></tr></tbody></table> <p>一般来说HTML使用协商缓存，CSS&amp;JS&amp;图片：使用强缓存，文件命名带上hash值。协商缓存需要配合强缓存使用，如果不启用强缓存的话，协商缓存根本没有意义。</p> <blockquote><p>大部分web服务器都默认开启协商缓存，而且是同时启用【Last-Modified，If-Modified-Since】和【ETag、If-None-Match】</p></blockquote> <h3 id="优缺点"><a href="#优缺点" class="header-anchor">#</a> 优缺点</h3> <p>优点：</p> <ul><li>减少了不必要的数据传输，节省带宽</li> <li>减少服务器的负担，提升网站性能</li> <li>加快了客户端加载网页的速度</li> <li>用户体验友好</li></ul> <p>缺点：资源如果有更改但是客户端不及时更新会造成用户获取信息滞后，如果老版本有bug的话，情况会更加糟糕。</p> <blockquote></blockquote> <p>HTML页面中也有一个meta标签可以控制缓存方案-Pragma： <code>&lt;META HTTP-EQUIV=&quot;Pragma&quot; CONTENT=&quot;no-cache&quot;&gt;</code>
支持情况不佳，譬如缓存代理服务器肯定不支持</p> <h3 id="其余缓存"><a href="#其余缓存" class="header-anchor">#</a> 其余缓存</h3> <p>强缓存和协商缓存属于浏览器缓存，缓存还有以下几种：</p> <h4 id="代理服务器缓存"><a href="#代理服务器缓存" class="header-anchor">#</a> 代理服务器缓存</h4> <p>代理服务器缓存就是一个共享缓存，不只为一个用户服务，经常为大量用户使用，因此在减少相应时间和带宽使用方面很有效：因为同一个缓存可能会被重用多次。</p> <h4 id="网关缓存"><a href="#网关缓存" class="header-anchor">#</a> 网关缓存</h4> <p>称为代理缓存或反向代理缓存，网关也是一个中间服务器，网关缓存一般是网站管理员自己部署，从让网站拥有更好的性能</p> <p>CDNS(网络内容分发商)分布网关缓存到整个（或部分）互联网上，并出售缓存服务给需要的网站，比如国内的七牛云、又拍云都有这种服务</p> <h4 id="数据库缓存"><a href="#数据库缓存" class="header-anchor">#</a> 数据库缓存</h4> <p>指当我们的应用极其复杂，表自然也很繁杂，我们必须进行频繁的进行数据库查询，这样可能导致数据库不堪重负，一个好的办法就是将查询后的数据放到内存中，下一次查询直接从内存中取就好了</p> <h2 id="缓存技术"><a href="#缓存技术" class="header-anchor">#</a> 缓存技术</h2> <h3 id="cookie"><a href="#cookie" class="header-anchor">#</a> Cookie</h3> <p>HTTP协议本身是无状态的，服务器无法判断用户身份。Cookie实际上是一小段key-value格式的文本信息。客户端向服务器发起请求，如果服务器需要记录该用户状态，就使用response向客户端浏览器颁发一个Cookie。客户端浏览器会把Cookie保存起来。当浏览器再请求该网站时，浏览器把请求的网址连同该Cookie一同提交给服务器。服务器检查该Cookie，以此来辨认用户状态。Cookie主要用于用户信息的存储。</p> <ul><li><p>内存大小受限，根据浏览器不同约为4KB</p></li> <li><p>具有生命周期，根据设不设定expires的状态分为：</p> <ul><li>会话cookie</li> <li>持久cookie</li></ul></li> <li><p>满足同源策略</p> <p>访问玩zhidao. baidu. com 再访问wenku. baidu. com还需要重新登陆百度账号吗？ 解决办法: 设置document. domain = ‘baidu. com’; 让页面属于这个基础域名下（那么此页面和任何二级域名为baidu. com的）</p></li></ul> <p><strong>过程</strong></p> <p>1. 客户端发送一个请求到服务器
2. 服务器发送一个HttpResponse响应到客户端，其中包含Set-Cookie的头部
3. 客户端保存cookie，之后向服务器发送请求时，HttpRequest请求中会包含一个Cookie的头部
4. 服务器返回响应数据</p> <p><strong>缺点</strong></p> <ul><li>cookie会被附加在每个HTTP请求增加了流量。</li> <li>cookie是明文传递的存在安全性成问题，使用全站HTTPS来解决。</li> <li>Cookie的大小限制在4KB左右。存储大小受限。</li></ul> <h4 id="属性"><a href="#属性" class="header-anchor">#</a> 属性</h4> <p>Cookie以 NAME=VALUE 键值对存在， 可以设置要保存的 Key/Value，需要注意这里的 NAME不可重复。</p> <p><strong>Expires 过期时间</strong></p> <p>用于设置的某个时间点后该 Cookie 就会失效。</p> <ul><li><p>expire</p> <p>值是一个时间，过了这个时间，该cookie就失效了。</p></li> <li><p>maxAge</p> <p>用maxAge指定当前cookie是在多长时间之后而失效。</p> <ul><li>maxAge属性为正数：该Cookie会在maxAge秒之后自动失效；</li> <li>maxAge属性为负数：该Cookie只是一个临时Cookie，不会被持久化，仅在本浏览器窗口或者本窗口打开的子窗口中有效，关闭浏览器后该Cookie立即失效；</li> <li>maxAge为0： 立即删除Cookie</li></ul></li></ul> <p><strong>Domain域</strong></p> <p>表示当前cookie所属于哪个域或子域下面。</p> <p>set-Cookie响应首部添加一个Domain属性来控制哪些站点可以看到那个cookie。对于服务器返回的Set-Cookie中，如果没有指定Domain的值，那么其Domain的值是默认为当前所提交的http的请求所对应的主域名的。比如访问 http://www.baidu.com，返回一个cookie，没有指名domain值，那么其为值为默认的www. baidu. com。</p> <p><strong>Path</strong></p> <p>表示cookie的所属路径。这个属性设置的url且带有这个前缀的url路径都是有效的。</p> <p><strong>Secure</strong></p> <p>表示该cookie只能用https传输。一般用于包含认证信息的cookie，要求传输此cookie的时候，必须用https传输。</p> <p><strong>httponly</strong></p> <p>表示此cookie必须用于http或https传输。这意味着，浏览器脚本，比如javascript中，是不允许访问操作此cookie的。</p> <h4 id="安全隐患"><a href="#安全隐患" class="header-anchor">#</a> 安全隐患</h4> <p><strong>网络窃听</strong></p> <p>网络上的流量可以被网络上任何计算机拦截，特别是未加密的开放式WIFI。这种流量包含在普通的未加密的HTTP清求上发送Cookie。在未加密的情况下，攻击者可以读取网络上的其他用户的信息，包含HTTP Cookie的全部内容，以便进行中间的攻击。比如：拦截cookie来冒充用户身份执行恶意任务（银行转账等）。</p> <p>解决方法：服务器可以设置secure属性的cookie，这样就只能通过https的方式来发送cookies了。</p> <p><strong>DNS缓存中毒</strong></p> <p>攻击者使用DNS中毒来创建一个虚拟的NDS服务h123456. www. demo. com指向攻击者服务器的ip地址。然后攻击者可以从服务器 h123456. www. demo. com/img_01. png 发布图片。用户访问这个图片，由于 www. demo. com和h123456. www. demo. com是同一个子域，所以浏览器会把用户的与www. demo. com相关的cookie都会发送到h123456. www. demo. com这个服务器上，这样攻击者就会拿到用户的cookie搞事情</p> <p>一般情况下是不会发生这种情况，通常是网络供应商错误。</p> <p><strong>跨站点脚本XSS与跨站请求伪造CSRF</strong></p> <p>详见web安全</p> <h4 id="手写cookie"><a href="#手写cookie" class="header-anchor">#</a> 手写cookie</h4> <p>封装</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//获得cookie 的值</span>

<span class="token keyword">function</span> <span class="token function">cookie</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">var</span> cookieArray <span class="token operator">=</span> document<span class="token punctuation">.</span>cookie<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//得到分割的cookie名值对    </span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> cookieArray<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token keyword">var</span> arr <span class="token operator">=</span> cookieArray<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;=&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//将名和值分开    </span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> name<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token function">unescape</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//如果是指定的cookie，则返回它的值    </span>

    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">getCookie</span><span class="token punctuation">(</span><span class="token parameter">objName</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//获取指定名称的cookie的值</span>

    <span class="token keyword">var</span> arrStr <span class="token operator">=</span> document<span class="token punctuation">.</span>cookie<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arrStr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token keyword">var</span> temp <span class="token operator">=</span> arrStr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;=&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>temp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> objName<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token function">unescape</span><span class="token punctuation">(</span>temp<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">addCookie</span><span class="token punctuation">(</span><span class="token parameter">objName<span class="token punctuation">,</span> objValue<span class="token punctuation">,</span> objHours</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//添加cookie</span>

    <span class="token keyword">var</span> str <span class="token operator">=</span> objName <span class="token operator">+</span> <span class="token string">&quot;=&quot;</span> <span class="token operator">+</span> <span class="token function">escape</span><span class="token punctuation">(</span>objValue<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>objHours <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//为时不设定过期时间，浏览器关闭时cookie自动消失</span>

        <span class="token keyword">var</span> date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">var</span> ms <span class="token operator">=</span> objHours <span class="token operator">*</span> <span class="token number">3600</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">;</span>

        date<span class="token punctuation">.</span><span class="token function">setTime</span><span class="token punctuation">(</span>date<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> ms<span class="token punctuation">)</span><span class="token punctuation">;</span>

        str <span class="token operator">+=</span> <span class="token string">&quot;; expires=&quot;</span> <span class="token operator">+</span> date<span class="token punctuation">.</span><span class="token function">toGMTString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

    document<span class="token punctuation">.</span>cookie <span class="token operator">=</span> str<span class="token punctuation">;</span>

<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">SetCookie</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token comment">//两个参数，一个是cookie的名子，一个是值</span>

<span class="token punctuation">{</span>

    <span class="token keyword">var</span> Days <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span> <span class="token comment">//此 cookie 将被保存 30 天</span>

    <span class="token keyword">var</span> exp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//new Date(&quot;December 31, 9998&quot;);</span>

    exp<span class="token punctuation">.</span><span class="token function">setTime</span><span class="token punctuation">(</span>exp<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> Days <span class="token operator">*</span> <span class="token number">24</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    document<span class="token punctuation">.</span>cookie <span class="token operator">=</span> name <span class="token operator">+</span> <span class="token string">&quot;=&quot;</span> <span class="token operator">+</span> <span class="token function">escape</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;;expires=&quot;</span> <span class="token operator">+</span> exp<span class="token punctuation">.</span><span class="token function">toGMTString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">getCookie</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token comment">//取cookies函数        </span>

<span class="token punctuation">{</span>

    <span class="token keyword">var</span> arr <span class="token operator">=</span> document<span class="token punctuation">.</span>cookie<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">&quot;(^| )&quot;</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">&quot;=([^;]*)(;|$)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>arr <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token function">unescape</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">delCookie</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token comment">//删除cookie</span>
<span class="token punctuation">{</span>
    <span class="token keyword">var</span> exp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    exp<span class="token punctuation">.</span><span class="token function">setTime</span><span class="token punctuation">(</span>exp<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> cval <span class="token operator">=</span> <span class="token function">getCookie</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>cval <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        document<span class="token punctuation">.</span>cookie <span class="token operator">=</span> name <span class="token operator">+</span> <span class="token string">&quot;=&quot;</span> <span class="token operator">+</span> cval <span class="token operator">+</span> <span class="token string">&quot;;expires=&quot;</span> <span class="token operator">+</span> exp<span class="token punctuation">.</span><span class="token function">toGMTString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br></div></div><p>使用</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 1.新增cookie：</span>
$<span class="token punctuation">.</span><span class="token function">cookie</span><span class="token punctuation">(</span><span class="token string">'cookieName'</span><span class="token punctuation">,</span> <span class="token string">'cookieValue'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
注： 如果没有设置cookie的有效期， 则cookie默认在浏览器关闭前都有效， 故被称为 <span class="token string">&quot;会话cookie&quot;</span>。

<span class="token comment">// 创建一个cookie并设置有效时间为7天:</span>
$<span class="token punctuation">.</span><span class="token function">cookie</span><span class="token punctuation">(</span><span class="token string">'cookieName'</span><span class="token punctuation">,</span> <span class="token string">'cookieValue'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    expires<span class="token operator">:</span> <span class="token number">7</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 创建一个cookie并设置cookie的有效路径：</span>
$<span class="token punctuation">.</span><span class="token function">cookie</span><span class="token punctuation">(</span><span class="token string">'cookieName'</span><span class="token punctuation">,</span> <span class="token string">'cookieValue'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    expires<span class="token operator">:</span> <span class="token number">7</span><span class="token punctuation">,</span>
    path<span class="token operator">:</span> <span class="token string">'/'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 2.读取cookie：</span>
$<span class="token punctuation">.</span><span class="token function">cookie</span><span class="token punctuation">(</span><span class="token string">'cookieName'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 若cookie存在则返回'cookieValue'；若cookie不存在则返回null</span>

<span class="token comment">// 3.删除cookie：把ncookie的值设为null即可</span>
$<span class="token punctuation">.</span><span class="token function">cookie</span><span class="token punctuation">(</span><span class="token string">'the_cookie'</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h4 id="优化-2"><a href="#优化-2" class="header-anchor">#</a> 优化</h4> <ul><li><p>减少Cookie大小</p> <p>每次请求都会带上对应的 Cookie，减少 Cookie 大小可以降低其对响应速度的影响</p> <ul><li>去除不必要的 Cookie</li> <li>尽量压缩 Cookie 大小</li> <li>注意设置 Cookie 的 domain 级别，如无必要，不要影响到 sub-domain</li> <li>设置合适的过期时间</li></ul></li> <li><p>静态资源使用无Cookie域名</p> <p>静态资源一般无需使用 Cookie，可以把它们放在使用二级域名或者专门域名的无 Cookie 服务器上，降低 Cookie 传送的造成的流量浪费，提高响应速度</p></li></ul> <h3 id="localstorage"><a href="#localstorage" class="header-anchor">#</a> LocalStorage</h3> <p>LocalStorage的数据将一直保存在浏览器内，直到用户清除浏览器缓存数据为止, 容量为5MB。</p> <h4 id="localstorage和cookie的差别"><a href="#localstorage和cookie的差别" class="header-anchor">#</a> LocalStorage和cookie的差别</h4> <ul><li>localStorage容量为5MB，cookie的4K并且大多数一个站点最多保存20个cookie</li> <li>localStorage会可以将第一次请求的数据直接存储到本地，这个相当于一个5M大小的前端页面的数据库，相比于cookie可以节约带宽</li> <li>localStorage：始终有效，窗口或浏览器关闭也一直保存，因此用作持久数据；cookie：只在设置的cookie过期时间之前有效，即使窗口关闭或浏览器关闭；sessionStorage：仅在当前浏览器窗口关闭之前有效。</li> <li>在IE8以上的IE版本才支持localStorage这个属性，需要用try/catch来捕获/处理异常</li> <li>浏览器将localStorage的值类型限定为string类型，所以需要进行常见的JSON对象类型转换</li> <li>localStorage在浏览器的隐私模式下面是不可读取的</li> <li>localStorage如果存储内容多的话会消耗内存空间，会导致页面变卡</li> <li>localStorage不能被爬虫抓取到</li></ul> <h4 id="使用"><a href="#使用" class="header-anchor">#</a> 使用</h4> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>  <span class="token comment">// 新增修改</span>
  localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">&quot;key&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;value&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 获取</span>
  <span class="token keyword">var</span> name <span class="token operator">=</span> localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">&quot;key&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 删除</span>
  localStorage<span class="token punctuation">.</span><span class="token function">removeItem</span><span class="token punctuation">(</span><span class="token string">&quot;key&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 清空所有信息</span>
  localStorage<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>考虑浏览器问题时需要增加判断</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>window<span class="token punctuation">.</span>localStorage<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;浏览器不支持localstorage&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token comment">//主逻辑业务</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="多页面实时通讯"><a href="#多页面实时通讯" class="header-anchor">#</a> 多页面实时通讯</h4> <p>A页面改变，要求B页面同时改变，可以通过 <code>window.onstorage</code> <code>window.addEventListener('storage', () =&gt; {});</code> 来实现多页面通讯。
如果浏览器同时打开一个域名下面的多个页面，当其中的一个页面改变 sessionStorage 或 localStorage 的数据时，其他所有页面的  storage  事件会被触发，而原始页面并不触发 storage 事件。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>window<span class="token punctuation">.</span><span class="token function-variable function">onstorage</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'The '</span> <span class="token operator">+</span> e<span class="token punctuation">.</span>key <span class="token operator">+</span> <span class="token string">' key has been changed from '</span> <span class="token operator">+</span> e<span class="token punctuation">.</span>oldValue <span class="token operator">+</span> <span class="token string">' to '</span> <span class="token operator">+</span> e<span class="token punctuation">.</span>newValue <span class="token operator">+</span> <span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="设置过期时间"><a href="#设置过期时间" class="header-anchor">#</a> 设置过期时间</h4> <p>localstorage原生是不支持设置过期时间的, 需要自己封装。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">set</span><span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> curtime <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//获取当前时间</span>
    localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        val<span class="token operator">:</span> value<span class="token punctuation">,</span>
        time<span class="token operator">:</span> curtime
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//转换成json字符串序列</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> exp</span><span class="token punctuation">)</span> <span class="token comment">//exp是设置的过期时间</span>
<span class="token punctuation">{</span>
    <span class="token keyword">var</span> val <span class="token operator">=</span> localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//获取存储的元素</span>
    <span class="token keyword">var</span> dataobj <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//解析出json对象</span>
    <span class="token comment">//如果当前时间-减去存储的元素在创建时候设置的时间 &gt; 过期时间</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> dataobj<span class="token punctuation">.</span>time <span class="token operator">&gt;</span> exp<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;expires&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//提示过期</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;val=&quot;</span> <span class="token operator">+</span> dataobj<span class="token punctuation">.</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h3 id="sessionstorage"><a href="#sessionstorage" class="header-anchor">#</a> SessionStorage</h3> <p>SessionStorage的其他属性同LocalStorage, 不同是的当页面关闭时会随之清除。sessionStorage不同的浏览器窗口中不能共享；localstorage和cookie在所有同源窗口中都是共享的。</p> <h4 id="使用-2"><a href="#使用-2" class="header-anchor">#</a> 使用</h4> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>  <span class="token comment">// 新增修改</span>
  sessionStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">&quot;key&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;value&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 获取</span>
  <span class="token keyword">var</span> name <span class="token operator">=</span> sessionStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">&quot;key&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 删除</span>
  sessionStorage<span class="token punctuation">.</span><span class="token function">removeItem</span><span class="token punctuation">(</span><span class="token string">&quot;key&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="存储"><a href="#存储" class="header-anchor">#</a> 存储</h2> <blockquote><p>题目：cookie 和 localStorage 有何区别？</p></blockquote> <h3 id="cookie-2"><a href="#cookie-2" class="header-anchor">#</a> cookie</h3> <p>cookie 本身不是用来做服务器端存储的（计算机领域有很多这种“狗拿耗子”的例子，例如 CSS 中的 float），它是设计用来在服务器和客户端进行信息传递的，因此我们的每个 HTTP 请求都带着 cookie。但是 cookie 也具备浏览器端存储的能力（例如记住用户名和密码），因此就被开发者用上了。</p> <p>使用起来也非常简单， <code>document.cookie = ....</code> 即可。</p> <p>但是 cookie 有它致命的缺点：</p> <ul><li>存储量太小，只有 4KB</li> <li>所有 HTTP 请求都带着，会影响获取资源的效率</li> <li>API 简单，需要封装才能用</li></ul> <h3 id="localstorage-和-sessionstorage"><a href="#localstorage-和-sessionstorage" class="header-anchor">#</a> localStorage 和 sessionStorage</h3> <p>后来，HTML5 标准就带来了 <code>sessionStorage</code> 和 <code>localStorage</code> ，先拿 <code>localStorage</code> 来说，它是专门为了浏览器端缓存而设计的。其优点有：</p> <ul><li>存储量增大到 5MB</li> <li>不会带到 HTTP 请求中</li> <li>API 适用于数据存储 <code>localStorage.setItem(key, value)</code> <code>localStorage.getItem(key)</code></li></ul> <p><code>sessionStorage</code> 的区别就在于它是根据 session 过去时间而实现，而 <code>localStorage</code> 会永久有效，应用场景不同。例如，一些需要及时失效的重要信息放在 <code>sessionStorage</code> 中，一些不重要但是不经常设置的信息，放在 <code>localStorage</code> 中。</p> <p>另外告诉大家一个小技巧，针对 <code>localStorage.setItem</code> ，使用时尽量加入到 <code>try-catch</code> 中，某些浏览器是禁用这个 API 的，要注意。</p> <h3 id="service-worker"><a href="#service-worker" class="header-anchor">#</a> Service Worker</h3> <p>主要是为了提高web app的用户体验，可以实现离线应用消息推送等等一系列的功能, 可以看做是一个独立于浏览器的Javascript代理脚本, 在离线状态下也能提供基本的功能。 出于安全性的考虑，Service Worker 只能在https协议下使用</p> <p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Service_Worker_API/Using_Service_Workers" target="_blank" rel="noopener noreferrer">Service Worker API<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="性能检测"><a href="#性能检测" class="header-anchor">#</a> 性能检测</h2> <h3 id="白屏时间"><a href="#白屏时间" class="header-anchor">#</a> 白屏时间</h3> <p>白屏时间是用户首次看到内容的时间，也叫做首次渲染时间，chrome 高版本有 firstPaintTime 接口来获取这个耗时.</p> <h3 id="首屏时间"><a href="#首屏时间" class="header-anchor">#</a> 首屏时间</h3> <p>首屏时间的统计比较复杂，因为涉及图片等多种元素及异步渲染等方式。观察加载视图可发现，影响首屏的主要因素的图片的加载。通过统计首屏内图片的加载时间便可以获取首屏渲染完成的时间。</p> <p>统计流程：</p> <p>1. 首屏位置调用 API 开始统计
2. 绑定首屏内所有图片的 load 事件
3. 页面加载完后判断图片是否在首屏内，找出加载最慢的一张
4. 计算首屏时间</p> <h3 id="用户可操作时间"><a href="#用户可操作时间" class="header-anchor">#</a> 用户可操作时间</h3> <p>用户可操作默认可以统计domready时间，因为通常会在这时候绑定事件操作。对于使用了模块化异步加载的 JS 可以在代码中去主动标记重要 JS 的加载时间，这也是产品指标的统计方式。</p> <h3 id="总下载时间"><a href="#总下载时间" class="header-anchor">#</a> 总下载时间</h3> <p>总下载时间默认可以统计onload时间，这样可以统计同步加载的资源全部加载完的耗时。如果页面中存在很多异步渲染，可以将异步渲染全部完成的时间作为总下载时间</p> <h3 id="工具"><a href="#工具" class="header-anchor">#</a> 工具</h3> <h4 id="chrome工具performance-面板"><a href="#chrome工具performance-面板" class="header-anchor">#</a> chrome工具Performance 面板</h4> <p>CPU 图标和 Summary 图都是按照“类型”给我们提供性能信息，而 Main 火焰图则将粒度细化到了每一个函数的调用。到底是从哪个过程开始出问题、是哪个函数拖了后腿、又是哪个事件触发了这个函数，这些具体的、细致的问题都将在 Main 火焰图中得到解答。</p> <p><a href="https://developers.google.com/web/tools/chrome-devtools/evaluate-performance/reference" target="_blank" rel="noopener noreferrer">使用文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h4 id="lighthouse工具或audits-面板"><a href="#lighthouse工具或audits-面板" class="header-anchor">#</a> LightHouse工具或Audits 面板</h4> <p>根据评分细项给出改进意见，逐条改进
<a href="https://developers.google.com/web/tools/lighthouse/?hl=zh-cn" target="_blank" rel="noopener noreferrer">使用文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h4 id="window-performance"><a href="#window-performance" class="header-anchor">#</a> window. performance</h4> <p>time属性可以查看关键点的时间戳，计算性能时间指标.</p> <ul><li>DNS查询耗时</li></ul> <p><code>domainLookupEnd - domainLookupStart</code></p> <ul><li>TCP链接耗时</li></ul> <p><code>connectEnd - connectStart</code></p> <ul><li>request请求耗时</li></ul> <p><code>responseEnd - responseStart</code></p> <ul><li>解析dom树耗时</li></ul> <p><code>domComplete - domInteractive</code></p> <ul><li>白屏时间</li></ul> <p><code>responseStart - navigationStart</code></p> <ul><li>domready时间(用户可操作时间节点)</li></ul> <p><code>domContentLoadedEventEnd - navigationStart</code></p> <ul><li>onload时间(总下载时间)</li></ul> <p><code>loadEventEnd - navigationStart</code></p> <h2 id="跨域"><a href="#跨域" class="header-anchor">#</a> 跨域</h2> <p>当一个请求url的协议、域名、端口三者之间任意一个与当前页面url不同即为跨域，这是出于浏览器的同源策略限制。</p> <ul><li><p>域名不同</p> <p>例如：www. qietuniu. com 和www. qietunius. com 即为不同的域名</p></li> <li><p>二级域名相同，子域名不同</p> <p>例如：www. qietuniu. ct. com 和www. qietunius. ct. com 为子域不同</p></li> <li><p>协议不同</p> <p>例如：http与https</p></li> <li><p>端口不同</p> <p>例如：www. qietuniu. com:8888和www. qietuniu. com:8080</p></li></ul> <h4 id="场景"><a href="#场景" class="header-anchor">#</a> 场景</h4> <ul><li>资源跳转</li></ul> <p><code>&lt;a&gt;</code> 链接、重定向、表单提交</p> <ul><li>资源嵌入：</li></ul> <p><code>&lt;link&gt;</code> 、 <code>&lt;script&gt;</code> 、 <code>&lt;img&gt;</code> 、 <code>&lt;frame&gt;</code> 等dom标签，还有样式中 <code>background:url()</code> 、 <code>@font-face()</code> 等文件外链</p> <ul><li><p>脚本请求</p> <p>前端调用后台服务接口发起的ajax请求、dom和js对象的跨域操作等</p></li></ul> <p>跨域的三大要素是浏览器的限制、跨域、XHR（XHRHttpRequest）请求，缺一不可，也就是说破坏其中一个因素就可以成功访问到数据</p> <h3 id="跨域-2"><a href="#跨域-2" class="header-anchor">#</a> 跨域</h3> <blockquote><p>题目：如何实现跨域？</p></blockquote> <p>浏览器中有 <strong>同源策略</strong> ，即一个域下的页面中，无法通过 Ajax 获取到其他域的接口。例如有一个接口 <code>http://m.juejin.com/course/ajaxcourserecom?cid=459</code> ，你自己的一个页面 <code>http://www.yourname.com/page1.html</code> 中的 Ajax 无法获取这个接口。这正是命中了“同源策略”。如果浏览器哪些地方忽略了同源策略，那就是浏览器的安全漏洞，需要紧急修复。</p> <p>url 哪些地方不同算作跨域？</p> <ul><li>协议</li> <li>域名</li> <li>端口</li></ul> <p>但是 HTML 中几个标签能逃避过同源策略—— <code>&lt;script src=&quot;xxx&quot;&gt;</code> 、 <code>&lt;/img src=&quot;xxxx&quot;/&gt;</code> 、 <code>&lt;link href=&quot;xxxx&quot;&gt;</code> ，这三个标签的 <code>src/href</code> 可以加载其他域的资源，不受同源策略限制。</p> <p>因此，这使得这三个标签可以做一些特殊的事情。</p> <ul><li><code>&lt;/img&gt;</code> 可以做打点统计，因为统计方并不一定是同域的，在讲解 JS 基础知识异步的时候有过代码示例。除了能跨域之外， <code>&lt;/img&gt;</code> 几乎没有浏览器兼容问题，它是一个非常古老的标签。</li> <li><code>&lt;script&gt;</code> 和 <code>&lt;link&gt;</code> 可以使用 CDN，CDN 基本都是其他域的链接。</li> <li>另外 <code>&lt;script&gt;</code> 还可以实现 JSONP，能获取其他域接口的信息，接下来马上讲解。</li></ul> <p>但是请注意，所有的跨域请求方式，最终都需要信息提供方来做出相应的支持和改动，也就是要经过信息提供方的同意才行，否则接收方是无法得到它们的信息的，浏览器是不允许的。</p> <h3 id="解决跨域-jsonp"><a href="#解决跨域-jsonp" class="header-anchor">#</a> 解决跨域 - JSONP</h3> <p>首先，有一个概念你要明白，例如访问 <code>http://coding.m.juejin.com/classindex.html</code> 的时候，服务器端就一定有一个 <code>classindex.html</code> 文件吗？—— 不一定，服务器可以拿到这个请求，动态生成一个文件，然后返回。 同理， <code>&lt;script src=&quot;http://coding.m.juejin.com/api.js&quot;&gt;</code> 也不一定加载一个服务器端的静态文件，服务器也可以动态生成文件并返回。OK，接下来正式开始。</p> <p>例如我们的网站和掘金网，肯定不是一个域。我们需要掘金网提供一个接口，供我们来获取。首先，我们在自己的页面这样定义</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span> script <span class="token operator">&gt;</span>
    window<span class="token punctuation">.</span><span class="token function-variable function">callback</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 这是我们跨域得到信息</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token operator">&lt;</span>
    <span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>然后掘金网给我提供了一个 <code>http://coding.m.juejin.com/api.js</code> ，内容如下（之前说过，服务器可动态生成内容）</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    x<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
    y<span class="token operator">:</span> <span class="token number">200</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>最后我们在页面中加入 <code>&lt;script src=&quot;http://coding.m.juejin.com/api.js&quot;&gt;&lt;/script&gt;</code> ，那么这个js加载之后，就会执行内容，我们就得到内容了。</p> <h3 id="解决跨域-服务器端设置-http-header"><a href="#解决跨域-服务器端设置-http-header" class="header-anchor">#</a> 解决跨域 - 服务器端设置 http header</h3> <p>这是需要在服务器端设置的，作为前端工程师我们不用详细掌握，但是要知道有这么个解决方案。而且，现在推崇的跨域解决方案是这一种，比 JSONP 简单许多。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>response.setHeader(&quot;Access-Control-Allow-Origin&quot;, &quot;http://m.juejin.com/&quot;);  // 第二个参数填写允许跨域的域名称，不建议直接写 &quot;*&quot;
response.setHeader(&quot;Access-Control-Allow-Headers&quot;, &quot;X-Requested-With&quot;);
response.setHeader(&quot;Access-Control-Allow-Methods&quot;, &quot;PUT,POST,GET,DELETE,OPTIONS&quot;);

// 接收跨域的cookie
response.setHeader(&quot;Access-Control-Allow-Credentials&quot;, &quot;true&quot;);

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></div> <footer class="page-edit" style="display:none;"><!----> <!----></footer> <!----> <!----> <!----></main> <!----></div></div></div></div><div class="global-ui"><canvas id="vuepress-canvas-ribbon"></canvas><canvas id="vuepress-canvas-cursor"></canvas><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-2a0afe42 data-v-2a0afe42><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-2a0afe42><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-2a0afe42></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-2a0afe42></path></svg></div></div></div>
    <script src="/assets/js/app.da1d409d.js" defer></script><script src="/assets/js/3.d3ecd2b0.js" defer></script><script src="/assets/js/1.9151198b.js" defer></script><script src="/assets/js/40.b81e0a49.js" defer></script>
  </body>
</html>
